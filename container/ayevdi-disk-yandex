# ayevdi
# Virtualized Deployment IaaS (VDI) by AyeAI
# 
# NOTICE
# Copyright (C) 2019 Abhishek Choudhary
# 
# To all WHO IT MAY CONCERN,
# Greetings,
# All artifacts and methods in this project are offered with 
# NO WARRANTY, and ZERO LIABILITY (Limited to INR 1/- only),
# subject to the jurisdictions of courts in Hyderabad, India,
# and solely in accordance with AyeAI SPL version 1, or later,
# as expressed at the follow URL and at the most current update
# https://raw.githubusercontent.com/ayeai/spl/master/LICENSE
# incuding its clauses of automatic implicit update of license,
# and unless in conflict the terms and conditions of GNU GPL v2
# shall apply with no retort to other GPL licenses, AND, These
# terms and conditions are implied read, understood and accepted
# by the access, or usage of these artifacts and methods which
# must STRICTLY be IN ACCORDANCE, and this notice must be 
# reproduced in derivatives along with the original assertions
# of copyrights.

prog="/usr/bin/yandex-disk"

if [ -e ${HOME}/ayework/Yandex.Disk ]
then

  echo Yandex.Disk exists

else

  read -p "Username: " uuid
  read -s -p "Password: " upwd

  mkdir -p ${HOME}/ayework/
  /usr/bin/expect <<EOF
    spawn "$prog" "setup"
    expect "Would you like to use a proxy server?"
      send "n\r"
    expect "Enter username:"
      send "$uuid\r"
    expect "Enter password:"
      send "$upwd\r"
    expect "/Yandex.Disk'):"
      send "${HOME}/ayework/Yandex.Disk\r"
    expect "Would you like Yandex.Disk to launch on startup?"
      send "y\r"
    expect eof
    exit
EOF

    $prog "start"

fi
